databaseChangeLog:
  - changeSet:
      author: avovchen
      id: market_simulator_schema_constraint_venue_1
      labels: schema,v4
      comment: Set `true` default value for venue.order_on_startup column
      preConditions:
        - onFail: MARK_RAN
        - tableExists:
            tableName: venue
        - columnExists:
            tableName: venue
            columnName: order_on_startup
      changes:
        - addDefaultValue:
            tableName: venue
            columnName: order_on_startup
            defaultValueBoolean: true

  - changeSet:
      author: avovchen
      id: market_simulator_schema_constraint_venue_2
      labels: schema,v4,SIM-631
      comment: Set `false` default value for venue.persistence_enabled column
      preConditions:
        - onFail: MARK_RAN
        - tableExists:
            tableName: venue
        - columnExists:
            tableName: venue
            columnName: persistence_enabled
      changes:
        - addDefaultValue:
            tableName: venue
            columnName: persistence_enabled
            defaultValueBoolean: false

  - changeSet:
      author: kbahatki
      id: market_simulator_schema_constraint_venue_3
      labels: schema,v11
      comment: Add NOT NULL constraint venue_order_on_startup_not_null on venue.order_on_startup
      preConditions:
        - onFail: MARK_RAN
        - tableExists:
            tableName: venue
        - columnExists:
            tableName: venue
            columnName: order_on_startup
      changes:
        - addNotNullConstraint:
            constraintName: venue_order_on_startup_not_null
            tableName: venue
            columnName: order_on_startup
            columnDataType: bool
            defaultNullValue: true
            validate: true

  - changeSet:
      author: kbahatki
      id: market_simulator_schema_constraint_venue_4
      labels: schema,v11
      comment: Add NOT NULL constraint venue_persistence_enabled_not_null on venue.persistence_enabled
      preConditions:
        - onFail: MARK_RAN
        - tableExists:
            tableName: venue
        - columnExists:
            tableName: venue
            columnName: persistence_enabled
      changes:
        - addNotNullConstraint:
            constraintName: venue_persistence_enabled_not_null
            tableName: venue
            columnName: persistence_enabled
            columnDataType: bool
            defaultNullValue: false
            validate: true
